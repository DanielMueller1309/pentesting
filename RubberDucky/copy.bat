@ECHO OFF

REM Aufgabe:
REM Kopiere alle Dateien aus Quelle nach Ziel
REM und benenne sie dabei fortlaufend numerisch um
REM und behalte den Dateityp bei

REM Lokale Parameter
SET Q=C:\
SET Ziel=%TMP%\passwords
REM Startwert f端r die Nummer
SET Zahl=1000
SET Pfade=%Ziel%\pfade.md
SET t=".kdbx"
REM Wir m端ssen erst die "Delayed Expansion" einschalten 
SETLOCAL ENABLEDELAYEDEXPANSION
copy NUL %Pfade%
REM Das DIR-Kommando gibt die Dateien in der gew端nschten Folge zur端ck
FOR /F  %%i IN ('dir /S/B %Q%*%t%') DO (
	ECHO Alt: %%i
	SET /A Zahl+=1
	ECHO [!Zahl!.%t% %%i](!Zahl!.%t%")" >> %Pfade%
	ECHO Neu: %Ziel%\!Zahl!.%t%
	ECHO.
	COPY %%i %Ziel%\!Zahl!.%t%
	ECHO.
	)